"use strict";(this.webpackChunkexcalidraw_app=this.webpackChunkexcalidraw_app||[]).push([[871],{5650:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(1413),r=t(4925),c=t(9439),i=t(4519),s=t(9149),o=t(9410),u=t(8106),l=t(1695),d=(t(9011),t(2556)),h=["node","inline","className","children"];var m=function(e){var n=e.src,t=(0,i.useState)(""),m=(0,c.Z)(t,2),f=m[0],v=m[1];return(0,i.useEffect)((function(){fetch(n).then((function(e){return e.text()})).then((function(e){v(e)}))}),[n]),(0,d.jsx)("div",{className:"markdown-body",children:(0,d.jsx)(s.D,{children:f,rehypePlugins:[l.Z],remarkPlugins:[o.Z],components:{code:function(e){e.node;var n=e.inline,t=e.className,c=e.children,i=(0,r.Z)(e,h),s=/language-(\w+)/.exec(t||"");return!n&&s?(0,d.jsx)(u.Z,(0,a.Z)({children:String(c).replace(/\n$/,""),language:s[1],className:"my-code",PreTag:"div"},i)):(0,d.jsx)("code",(0,a.Z)((0,a.Z)({className:t},i),{},{children:c}))}}})})}},9452:function(e,n,t){t.r(n),t.d(n,{default:function(){return w},isCanvasExceedsMaximumSize:function(){return x}});var a=t(9439),r=t(4519),c=t(5650),i=t.p+"static/media/canvas\u6700\u5927\u5c3a\u5bf8\u9650\u5236.74de79e1170fe30b5961.md",s=function(){var e,n,t=new Promise((function(t,a){e=t,n=a}));return t.resolve=e,t.reject=n,t}(),o=0,u=new MessageChannel,l=u.port2;u.port1.onmessage=function(){var e=(new Date).getTime();for(;m<h;){if(++o>1e3)return 0;var n=Math.floor(h/d);if(x(d,n)?(f=Math.min(n,f),h=parseInt((m+h)/2)):(m=h,h=Math.min(2*h,d*f)),(new Date).getTime()-e>5)break}m<h?l.postMessage(null):s.resolve({max:h,areaCount:o})};var d=0,h=1e3*d,m=d,f=0;var v=t(2556),g=0,x=function(e,n){var t=document.createElement("canvas");t.width=e,t.height=n,t.getContext("2d").fillRect(e-1,n-1,1,1);var a=document.createElement("canvas");a.width=1,a.height=1;var r=a.getContext("2d");return r.drawImage(t,e-1,n-1,1,1,0,0,1,1),!(r&&0!==r.getImageData(0,0,1,1).data[3])},p=function(){for(var e=65535,n=1e3,t=1/0;n<e;){if(++g>1e3)return 0;console.log("find width...",t,e,n),x(e,1)?(t=Math.min(e,t),e=parseInt((n+e)/2)):(n=e,e=Math.min(2*e,t))}return console.log("\u6700\u5927\u5bbd\u5ea6\uff1a\u5c1d\u8bd5\u4e86".concat(g,"\u6b21")),e}();var w=function(){var e=(0,r.useRef)(null),n=(0,r.useState)(p),t=(0,a.Z)(n,2),u=t[0],x=t[1],w=(0,r.useState)(1),j=(0,a.Z)(w,2),C=j[0],Z=j[1],N=(0,r.useState)({max:"--",areaCount:"--"}),b=(0,a.Z)(N,2),M=b[0],k=b[1];return(0,r.useEffect)((function(){var e;(e=p,h=10*e,m=e,d=e,f=e,l.postMessage(null),s.then((function(e){return console.log("\u6700\u5927\u9762\u79ef\uff1a".concat(e.max,"\uff0c\u5c1d\u8bd5\u4e86").concat(o,"\u6b21")),Promise.resolve(e)}))).then((function(e){k(e)}))}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"row",children:["\u6700\u5927\u5bbd\u5ea6\uff1a",p,"\uff0c\u6700\u5927\u9ad8\u5ea6\uff1a",p,"\uff0c\u7b97\u6cd5\u67e5\u627e\u6b21\u6570\uff1a",g]}),(0,v.jsxs)("div",{children:["\u6700\u5927\u9762\u79ef\uff1a",M.max,"\uff0c\u7b97\u6cd5\u67e5\u627e\u6b21\u6570\uff1a",M.areaCount]}),(0,v.jsxs)("div",{className:"row",children:["\u5bbd\u5ea6\uff1a",(0,v.jsx)("input",{type:"number",value:u,onChange:function(e){return x(Number(e.target.value))}})]}),(0,v.jsxs)("div",{className:"row",children:["\u9ad8\u5ea6\uff1a",(0,v.jsx)("input",{type:"number",value:C,onChange:function(e){return Z(Number(e.target.value))}})]}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{className:"btn",onClick:function(){return function(){var n=(new Date).getTime(),t=e.current;t.width=u,t.height=C;var a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),a.fillStyle="red",a.fillRect(0,0,300+1e3*Math.random(),300),console.log("\u7ed8\u5236\u8017\u65f6\uff1a".concat((new Date).getTime()-n,"\u6beb\u79d2"))}()},children:"\u70b9\u51fb\u7ed8\u5236canvas"})}),(0,v.jsx)("canvas",{ref:e,className:"maxsize_canvas",children:"\u7ed8\u5236canvas"}),(0,v.jsx)(c.Z,{src:i})]})}}}]);
//# sourceMappingURL=MaxSize.73ff11eb.chunk.js.map