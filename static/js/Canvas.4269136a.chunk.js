"use strict";(self.webpackChunkexcalidraw_app=self.webpackChunkexcalidraw_app||[]).push([[343],{6811:function(e,t,n){n.r(t),n.d(t,{appState:function(){return F},default:function(){return U}});var o=n(1413),r=n(3433),i=n(9439),l=n(2791),a=n(84),c=n(4925),s=["type","x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","width","height","angle","points"],d=function(e){var t=e.type,n=e.x,r=e.y,i=e.strokeColor,l=e.backgroundColor,d=e.fillStyle,u=e.strokeWidth,f=void 0===u?3:u,h=e.strokeStyle,v=e.width,g=void 0===v?0:v,p=e.height,m=void 0===p?0:p,x=e.angle,y=void 0===x?0:x,w=e.points,k=void 0===w?[]:w,C=(0,c.Z)(e,s);return(0,o.Z)({id:(0,a.kb)(),type:t,x:n,y:r,width:g,height:m,strokeColor:i,backgroundColor:l,fillStyle:d,strokeWidth:f,strokeStyle:h,angle:y,isDeleted:!1,points:k},C)},u=new WeakMap,f=function(e){u.delete(e)},h=function(e,t){var n=t.zoom||1,o=u.get(e);if(o)return o;var r=g(e,n,t);return u.set(e,r),r},v=document.getElementById("placeholder"),g=function(e,t,n){var o=document.createElement("canvas"),r=o.getContext("2d"),l=m(e);v||(v=document.getElementById("placeholder")),o;if("freedraw"===e.type){var c,s,d=(0,a.qf)(e),u=(0,i.Z)(d,4),f=u[0],h=u[1],g=u[2],x=u[3];o.width=(0,a.TE)(f,g)*window.devicePixelRatio+2*l,o.height=(0,a.TE)(h,x)*window.devicePixelRatio+2*l,c=e.x>f?(0,a.TE)(e.x,f)*window.devicePixelRatio:0,s=e.y>h?(0,a.TE)(e.y,h)*window.devicePixelRatio:0,r.translate(c,s)}else o.width=e.width*window.devicePixelRatio*t+l*t*2,o.height=e.height*window.devicePixelRatio*t+l*t*2;return r.save(),r.translate(l*t,l*t),r.scale(window.devicePixelRatio*t,window.devicePixelRatio*t),p(e,r,n),r.restore(),{element:e,canvas:o,theme:n.theme,canvasZoom:t,canvasOffsetX:0,canvasOffsetY:0}},p=function(e,t,n){switch(t.globalAlpha=e.opacity/100,e.type){case"rectangle":t.lineJoin="round",t.lineCap="round",t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeStyle,t.strokeRect(0,0,e.width,e.height);break;case"text":t.font=(0,a.mO)(e),t.fillStyle=e.strokeColor,t.textAlign=e.textAlign;var o=e.text.split("\n"),r=o.length?e.height/o.length:18;t.textBaseline="bottom";for(var l=0;l<o.length;l++)t.fillText(o[l],0,(l+1)*r);break;case"freedraw":t.save(),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeStyle,e.points.forEach((function(n,o){var r=(0,i.Z)(n,2),l=r[0],a=r[1];l-=e.x,a-=e.y,o?t.lineTo(l,a):t.moveTo(l,a)})),t.stroke(),t.restore()}t.globalAlpha=1},m=function(e){return"freedraw"===e.type?12*e.strokeWidth:20},x=function(e,t,n){var o=e.element,r=m(o),l=(0,a.qf)(o),c=(0,i.Z)(l,4),s=c[0],d=c[1],u=c[2],f=c[3];if("freedraw"===o.type){var h=(0,a.qf)(o),v=(0,i.Z)(h,4);s=v[0],d=v[1],u=v[2],f=v[3]}var g=((s+u)/2+n.scrollX)*window.devicePixelRatio,p=((d+f)/2+n.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio),t.translate(g,p),t.drawImage(e.canvas,-(u-s)/2*window.devicePixelRatio-r*e.canvasZoom/e.canvasZoom,-(f-d)/2*window.devicePixelRatio-r*e.canvasZoom/e.canvasZoom,e.canvas.width/e.canvasZoom,e.canvas.height/e.canvasZoom),t.restore()},y=function(e){var t=e.elements,n=e.appState,o=e.scale,r=e.canvas,i=e.renderConfig,l=r.getContext("2d");l.save(),l.scale(o,o);var a=r.width/o,c=r.height/o;l.clearRect(0,0,a,c),l.save(),l.scale(i.zoom,i.zoom),function(e,t){var n=t.scrollX,o=t.scrollY;e.save();var r=100,i=100,l=e.canvas;e.strokeStyle="red",e.fillStyle="red",e.beginPath(),e.lineWidth=2,e.textBaseline="middle",e.save(),e.translate(0,o);for(var a=0;a<o/r;a++)e.moveTo(0,-a*r),e.lineTo(8,-a*r),e.font="10px Arial",e.fillText(-a,0,-a*r+10);for(var c=1;c<(l.height-o)/r;c++)e.moveTo(0,c*r),e.lineTo(8,c*r),e.font="10px Arial",e.fillText(c,0,c*r+10);e.restore(),e.save(),e.translate(n,0);for(var s=0;s<n/i;s++)e.moveTo(-s*i,0),e.lineTo(-s*i,8),e.font="10px Arial",e.fillText(-s,-s*i+5,5);for(var d=1;d<(l.width-n)/i;d++)e.moveTo(d*i,0),e.lineTo(d*i,8),e.font="10px Arial",e.fillText(d,d*i+5,5);e.restore(),e.stroke(),e.restore()}(l,i),t.forEach((function(e){!function(e,t,n,o){var r=h(e,n);x(r,t,n)}(e,l,i)})),l.restore(),l.restore(),localStorage.setItem("elements",JSON.stringify(t)),localStorage.setItem("appState",JSON.stringify(n))},w={tools:"index_tools__ZQUTr",item:"index_item__JCc41",selected:"index_selected__uL6n6"},k=n(184),C=["width","height","mirror","style"],E=function(e,t){var n="number"===typeof t?{width:t}:t,r=n.width,i=void 0===r?512:r,l=n.height,a=void 0===l?i:l,s=(n.mirror,n.style),d=(0,c.Z)(n,C);return(0,k.jsx)("svg",(0,o.Z)((0,o.Z)({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(i," ").concat(a),style:s},d),{},{children:"string"===typeof e?(0,k.jsx)("path",{fill:"currentColor",d:e}):e}))},S=E((0,k.jsxs)("g",{strokeWidth:"1.5",children:[(0,k.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,k.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),{width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),j=E((0,k.jsxs)("g",{strokeWidth:"1.25",children:[(0,k.jsx)("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),(0,k.jsx)("path",{d:"m11.25 5.417 3.333 3.333"})]}),{width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),T=E((0,k.jsxs)("g",{strokeWidth:"1.25",children:[(0,k.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,k.jsx)("path",{d:"M15 8h.01"}),(0,k.jsx)("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),(0,k.jsx)("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),(0,k.jsx)("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),(0,k.jsx)("path",{d:"M19 16v6"}),(0,k.jsx)("path",{d:"M22 19l-3 3l-3 -3"})]}),{width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),M={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Z=E((0,k.jsx)("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),M),R=E((0,k.jsx)("path",{d:"M5 10h10",strokeWidth:"1.25"}),M),b=function(e){var t=e.elements,n=e.appState,r=function(e,t){var n=(0,a.KP)(e),o=(0,i.Z)(n,4),r=o[0],l=o[1],c=o[2],s=o[3];return[r,l,(0,a.TE)(r,c)+2*t,(0,a.TE)(l,s)+t+t]}(t,10),l=(0,i.Z)(r,4),c=l[0],s=l[1],d=l[2],u=l[3];console.log("export...",c,s,d,u);var f=document.createElement("canvas");f.width=d*window.devicePixelRatio,f.height=u*window.devicePixelRatio,y({elements:t,appState:(0,o.Z)((0,o.Z)({},n),{},{scrollX:10-c,scrollY:10-s}),scale:window.devicePixelRatio,canvas:f,renderConfig:{selectionColor:"#6965db",scrollX:10-c,scrollY:10-s,viewBackgroundColor:"#ffffff",zoom:1}}),console.log("\u5bfc\u51fa",t);var h=document.createElement("a");h.href=f.toDataURL(),h.download="canvas.png",h.click()},_=n(5671),P=n(3144),I=function(){function e(){(0,_.Z)(this,e);var t=JSON.parse(localStorage.getItem("elements"));this.elements=t||[]}return(0,P.Z)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"replaceAllElements",value:function(e){this.elements=e}}]),e}(),W=new I,B=[{type:"rectangle",icon:S},{type:"freedraw",icon:j}],A=(0,l.memo)((function(e){var t=e.activeTool,n=e.onActiveToolChange;return(0,k.jsxs)("div",{className:w.tools,children:[(0,k.jsx)("span",{className:[w.item].join(" "),onClick:function(){b({elements:W.getElementsIncludingDeleted(),appState:F})},children:T}),B.map((function(e){var o=t.type===e.type;return(0,k.jsx)("span",{className:[w.item,o&&w.selected].join(" "),onClick:function(){return n({type:o?"":e.type})},children:e.icon},e.type)}))]})})),L={scale:"index_scale__7GBXS",item:"index_item__EjyQO",value:"index_value__oZ-q0"},X=(0,l.memo)((function(){return(0,k.jsxs)("div",{className:L.scale,children:[(0,k.jsx)("span",{className:[L.item].join(" "),onClick:function(){},children:R}),(0,k.jsx)("span",{className:L.value,children:"100%"}),(0,k.jsx)("span",{className:[L.item].join(" "),onClick:function(){},children:Z})]})})),Y="index_layer__JlGve",z=(0,l.memo)((function(e){var t=e.activeTool,n=e.onActiveToolChange;return(0,k.jsxs)("div",{className:Y,children:[(0,k.jsx)(X,{}),(0,k.jsx)(A,{activeTool:t,onActiveToolChange:n})]})})),D={textarea:"index_textarea__b45r1",textarea_copy:"index_textarea_copy__REiTG"},N=(0,l.forwardRef)((function(e,t){var n=e.staticCanvasRef,c=(0,l.useRef)(null),s=(0,l.useState)(""),u=(0,i.Z)(s,2),h=u[0],v=u[1];return(0,l.useImperativeHandle)(t,(function(){return{startEditText:function(e){e.preventDefault(),e.stopPropagation();var t,n=(0,a.dE)(e,F),r=n.x,i=n.y,l=(t={x:r,y:i,strokeColor:(0,a.B8)(),backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",text:"",fontSize:20,fontFamily:"Virgil",textAlign:"left",verticalAlign:"top"},d((0,o.Z)({type:"text",text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,textAlign:t.textAlign,verticalAlign:t.verticalAlign,originalText:t.text},t)));F.draggingElement=l;var s=c.current;s.focus();var u=e.clientX-F.offsetLeft,f=e.clientY-F.offsetTop,h={font:(0,a.mO)(l),left:"".concat(u,"px"),top:"".concat(f,"px"),opacity:1,color:l.strokeColor,fontSize:l.fontSize};Object.assign(s.style,h);var v=document.getElementById("copyText");Object.assign(v.style,h);var g=F.canvasWidth-u;Object.assign(s.style,{zIndex:1,maxWidth:"".concat(g,"px"),width:"".concat(l.fontSize,"px"),height:"".concat(1.2*l.fontSize,"px")})}}})),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("textarea",{onChange:function(e){var t=e.target.value,n=c.current,o=parseFloat(n.style.maxWidth),r=document.getElementById("copyText");r.innerText=t;var i=r.getBoundingClientRect().width;if(i>o)if(i-o<30)console.log("\u6b63\u5e38\u7684\u8f93\u5165"),t=r.innerText=t.slice(0,t.length-1)+"\n"+t.slice(t.length-1);else{console.log("\u7c98\u8d34\u8fdb\u6765\u7684\u6587\u672c");var l=t.split("\n"),a=[];l.forEach((function(e){if(r.innerText=e,r.getBoundingClientRect().width<=o)a.push(e);else for(var t=0,n=1;n<e.length;n++){var i=e.slice(t,n);r.innerText=i,r.getBoundingClientRect().width>o?(a.push(e.slice(t,n-1)),t=n-1):n===e.length-1&&a.push(e.slice(t,n))}})),console.log("splitResult..",a),t=a.join("\n"),r.innerText=t}v(t);var s=r.getBoundingClientRect(),d=s.width,u=s.height;n.style.width="".concat(d+30,"px"),n.style.height="".concat(u,"px"),F.draggingElement.text=t},onBlur:function(){var e=F.draggingElement,t=c.current,o=document.getElementById("copyText");e.text&&(e.width=o.offsetWidth,e.height=o.offsetHeight,f(F.draggingElement),W.replaceAllElements([].concat((0,r.Z)(W.getElementsIncludingDeleted()),[F.draggingElement])),y({elements:W.getElementsIncludingDeleted(),appState:F,scale:window.devicePixelRatio,canvas:n.current,renderConfig:{selectionColor:"#6965db",scrollX:F.scrollX,scrollY:F.scrollY,viewBackgroundColor:"#ffffff",zoom:1}}),setTimeout((function(){o.innerText="",v("")}),200)),Object.assign(t.style,{left:"0px",top:"0px",zIndex:-1,opacity:0})},value:h,className:D.textarea,ref:c}),(0,k.jsx)("div",{style:{background:"grey"},id:"copyText",contentEditable:!0,className:[D.textarea,D.textarea_copy].join(" ")})]})})),O=(0,l.memo)(N),F=JSON.parse(localStorage.getItem("appState"))||{scrollX:0,scrollY:0,offsetLeft:0,offsetTop:0,draggingElement:null,canvasWidth:0,canvasHeight:0},J=(0,l.memo)((function(){var e=(0,l.useRef)(null),t=(0,l.useRef)(null),n=(0,l.useRef)(null),c=(0,l.useRef)(null),s=(0,l.useRef)(null),u=(0,l.useState)({type:""}),h=(0,i.Z)(u,2),v=h[0],g=h[1];(0,l.useEffect)((function(){var t=function(e){e.width=r*window.devicePixelRatio,e.height=i*window.devicePixelRatio},o=e.current,r=o.offsetWidth,i=o.offsetHeight;t(o),t(n.current);var l=o.getBoundingClientRect(),a=l.x,c=l.y;F.offsetLeft=a,F.offsetTop=c,F.canvasWidth=r,F.canvasHeight=i,y({elements:W.getElementsIncludingDeleted(),appState:F,scale:window.devicePixelRatio,canvas:n.current,renderConfig:{selectionColor:"#6965db",scrollX:F.scrollX,scrollY:F.scrollY,viewBackgroundColor:"#ffffff",zoom:1}})}),[]),(0,l.useEffect)((function(){var e=t.current,n=function(e){e.preventDefault()};return e.addEventListener("wheel",n,{passive:!1}),function(){e.removeEventListener("wheel",n)}}),[]),(0,l.useEffect)((function(){var e=0,t=Date.now();!function n(){var o=Date.now();if(e++,o>1e3+t){var r=Math.round(1e3*e/(o-t));s.current.innerText="FPS\uff1a".concat(r),e=0,t=o}requestAnimationFrame(n)}()}),[]);var p=function(t){return(0,a.$9)((function(n){var o=(0,a.dE)(n,F);if(t.lastCoords.x=o.x,t.lastCoords.y=o.y,"freedraw"===v.type)F.draggingElement.points.push([o.x,o.y]);else{var r=t.lastCoords,i=t.origin.x,l=t.origin.y,c=r.x,s=r.y,d=(0,a.TE)(t.origin.x,r.x),u=(0,a.TE)(t.origin.y,r.y),h=c<i?i-d:i,g=s<l?l-u:l;F.draggingElement.x=h,F.draggingElement.y=g,F.draggingElement.width=d,F.draggingElement.height=u}f(F.draggingElement),y({elements:[F.draggingElement],appState:F,scale:window.devicePixelRatio,canvas:e.current,renderConfig:{selectionColor:"#6965db",scrollX:F.scrollX,scrollY:F.scrollY,viewBackgroundColor:"#ffffff",zoom:1}})}))},m=function(t){return function(o){W.replaceAllElements([].concat((0,r.Z)(W.getElementsIncludingDeleted()),[F.draggingElement])),console.log("pointer up appState...",F);var i=e.current;i.getContext("2d").clearRect(0,0,i.width,i.height),y({elements:W.getElementsIncludingDeleted(),appState:F,scale:window.devicePixelRatio,canvas:n.current,renderConfig:{selectionColor:"#6965db",scrollX:F.scrollX,scrollY:F.scrollY,viewBackgroundColor:"#ffffff",zoom:1}}),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp)}},x=function(e){var t=(0,a.dE)(e,F);return{origin:t,lastCoords:(0,o.Z)({},t),eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null}}};return(0,k.jsxs)("div",{ref:t,children:[(0,k.jsxs)("div",{className:"container wrap",children:[(0,k.jsx)("canvas",{ref:n,className:"canvas",children:"\u9759\u6001canvas"}),(0,k.jsx)("canvas",{ref:e,className:"canvas draw",onWheel:function(e){var t=e.deltaX,o=e.deltaY;F.scrollX=F.scrollX-t,F.scrollY=F.scrollY-o,y({elements:W.getElementsIncludingDeleted(),appState:F,scale:window.devicePixelRatio,canvas:n.current,renderConfig:{selectionColor:"#6965db",scrollX:F.scrollX,scrollY:F.scrollY,viewBackgroundColor:"#ffffff",zoom:1}})},onPointerDown:function(e){if(v.type){var t=x(e),n=function(e){var t=e.elementType,n=e.pointerDownState,o=e.appState;return d("freedraw"===t?{type:t,x:n.origin.x,y:n.origin.y,points:[[n.origin.x,n.origin.y]],strokeColor:o.currentItemStrokeColor,backgroundColor:o.currentItemBackgroundColor,fillStyle:o.currentItemFillStyle,strokeWidth:o.currentItemStrokeWidth,strokeStyle:(0,a.B8)()}:{type:t,x:n.origin.x,y:n.origin.y,strokeColor:o.currentItemStrokeColor,backgroundColor:o.currentItemBackgroundColor,fillStyle:o.currentItemFillStyle,strokeWidth:o.currentItemStrokeWidth,strokeStyle:(0,a.B8)()})}({elementType:v.type,pointerDownState:t,appState:F});F.draggingElement=n,f(n);var o=p(t),r=m(t);window.addEventListener("pointermove",o),window.addEventListener("pointerup",r),t.eventListeners.onMove=o,t.eventListeners.onUp=r}},onDoubleClick:function(e){v.type||c.current.startEditText(e)},children:"\u52a8\u6001canvas"}),(0,k.jsx)(z,{activeTool:v,onActiveToolChange:function(e){g(e)}}),(0,k.jsx)(O,{ref:c,staticCanvasRef:n})]}),(0,k.jsx)("div",{ref:s,children:"FPS\uff1a--"}),(0,k.jsx)("div",{id:"placeholder"})]})})),U=J},84:function(e,t,n){n.d(t,{$9:function(){return s},B8:function(){return c},KP:function(){return f},TE:function(){return v},dE:function(){return a},kb:function(){return p},mO:function(){return m},qf:function(){return h}});var o=n(9439),r=n(7762),i=n(3433),l=n(4164),a=function(e,t){var n=e.clientX,o=e.clientY,r=t.offsetLeft,i=t.offsetTop;return{x:n-r-t.scrollX,y:o-i-t.scrollY}},c=function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),n=Math.floor(256*Math.random());return"rgb(".concat(e,",").concat(t,",").concat(n,")")},s=function(e){return function(e,t){var n=null,o=null,r=null,l=function t(l){n=window.requestAnimationFrame((function(){n=null,e.apply(void 0,(0,i.Z)(l)),o=null,r&&(o=r,r=null,t(o))}))},a=function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];o=i,null===n?l(o):null!==t&&void 0!==t&&t.trailing&&(r=i)};return a.flush=function(){null!==n&&(cancelAnimationFrame(n),n=null),o&&(e.apply(void 0,(0,i.Z)(r||o)),o=r=null)},a.cancel=function(){o=r=null,null!==n&&(cancelAnimationFrame(n),n=null)},a}((function(t){(0,l.unstable_batchedUpdates)(e,t)}))},d=function(e){var t=1/0,n=1/0,i=-1/0,l=-1/0,a=e.points;"freedraw"===e.type&&(a=e.points.map((function(t){return[t[0]-e.x,t[1]-e.y]})));var c,s=(0,r.Z)(a);try{for(s.s();!(c=s.n()).done;){var d=(0,o.Z)(c.value,2),u=d[0],f=d[1];t=Math.min(t,u),n=Math.min(n,f),i=Math.max(i,u),l=Math.max(l,f)}}catch(h){s.e(h)}finally{s.f()}return[t,n,i,l]},u=function(e,t,n,o,r){return[(e-n)*Math.cos(r)-(t-o)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-o)*Math.cos(r)+o]},f=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,i=-1/0;return e.forEach((function(e){var l=function(e){var t=h(e),n=(0,o.Z)(t,6),r=n[0],i=n[1],l=n[2],a=n[3],c=n[4],s=n[5];if("freedraw"===e.type){var f=d(e),v=(0,o.Z)(f,4),g=v[0],p=v[1],m=v[2],x=v[3];return[g+e.x,p+e.y,m+e.x,x+e.y]}var y=u(r,i,c,s,e.angle),w=(0,o.Z)(y,2),k=w[0],C=w[1],E=u(r,a,c,s,e.angle),S=(0,o.Z)(E,2),j=S[0],T=S[1],M=u(l,a,c,s,e.angle),Z=(0,o.Z)(M,2),R=Z[0],b=Z[1],_=u(l,i,c,s,e.angle),P=(0,o.Z)(_,2),I=P[0],W=P[1];return[Math.min(k,j,R,I),Math.min(C,T,b,W),Math.max(k,j,R,I),Math.max(C,T,b,W)]}(e),a=(0,o.Z)(l,4),c=a[0],s=a[1],f=a[2],v=a[3];t=Math.min(t,c),r=Math.min(r,s),n=Math.max(n,f),i=Math.max(i,v)})),[t,r,n,i]},h=function(e){if("freedraw"===e.type){var t=d(e),n=(0,o.Z)(t,4),r=n[0],i=n[1],l=n[2],a=n[3],c=r+e.x,s=i+e.y,u=l+e.x,f=a+e.y;return[c,s,u,f,(c+u)/2,(s+f)/2]}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},v=function(e,t){return Math.abs(e-t)},g=0,p=function(){return"id".concat(g++)};window.__generateExcalidrawElements=function(){return(JSON.parse(localStorage.getItem("free-draw-elements"))||[]).map((function(e){var t=e.points.map((function(t){return[t[0]-e.x,t[1]-e.y]})),n=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,(0,i.Z)(t))-Math.min.apply(Math,(0,i.Z)(t)),height:Math.max.apply(Math,(0,i.Z)(n))-Math.min.apply(Math,(0,i.Z)(n))}}(t),o=n.width,r=n.height;return{id:p(),type:"freedraw",x:e.x,y:e.y,width:o,height:r,angle:0,strokeColor:e.strokeStyle,backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],roundness:null,seed:Math.floor(Math.random()*Math.pow(2,31)),version:1,versionNonce:0,isDeleted:!1,boundElements:null,updated:Date.now(),link:null,locked:!1,points:t,pressures:[],simulatePressure:!0,lastCommittedPoint:t[t.length-1]}}))};var m=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(n,", Segoe UI Emoji")}}}]);
//# sourceMappingURL=Canvas.4269136a.chunk.js.map