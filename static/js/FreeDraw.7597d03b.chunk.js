"use strict";(this.webpackChunkexcalidraw_app=this.webpackChunkexcalidraw_app||[]).push([[826],{45650:function(n,e,t){t.d(e,{Z:function(){return d}});var r=t(1413),i=t(44925),a=t(29439),o=t(4519),u=t(19149),c=t(49410),l=t(88106),s=t(1695),f=(t(99011),t(2556)),h=["node","inline","className","children"];var d=function(n){var e=n.src,t=(0,o.useState)(""),d=(0,a.Z)(t,2),v=d[0],m=d[1];return(0,o.useEffect)((function(){fetch(e).then((function(n){return n.text()})).then((function(n){m(n)}))}),[e]),(0,f.jsx)("div",{className:"markdown-body",children:(0,f.jsx)(u.D,{children:v,rehypePlugins:[s.Z],remarkPlugins:[c.Z],components:{code:function(n){n.node;var e=n.inline,t=n.className,a=n.children,o=(0,i.Z)(n,h),u=/language-(\w+)/.exec(t||"");return!e&&u?(0,f.jsx)(l.Z,(0,r.Z)({children:String(a).replace(/\n$/,""),language:u[1],className:"my-code",PreTag:"div"},o)):(0,f.jsx)("code",(0,r.Z)((0,r.Z)({className:t},o),{},{children:a}))}}})})}},30199:function(n,e,t){t.r(e),t.d(e,{default:function(){return d},elements:function(){return f}});var r=t(1413),i=t(29439),a=t(4519),o=t(45204),u=t(45650),c=t.p+"static/media/\u81ea\u7531\u7ed8\u5236.31d6cfe0d16ae931b73c.md",l=function(n,e){var t,r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),t=r,f.forEach((function(n){var e=n.points;if(!(e.length<2)){t.save(),t.lineWidth=4,t.lineJoin="round",t.lineCap="round",t.strokeStyle=n.strokeStyle,t.beginPath();var r=e[0];t.moveTo(r[0],r[1]);for(var i=1;i<e.length;i++){var a=(e[i][0]+e[i-1][0])/2,o=(e[i][1]+e[i-1][1])/2;t.quadraticCurveTo(e[i-1][0],e[i-1][1],a,o)}t.stroke(),t.restore()}}))},s=t(2556),f=JSON.parse(localStorage.getItem("free-draw-elements"))||[],h={offsetLeft:0,offsetTop:0,scrollX:0,scrollY:0,draggingElement:null},d=(0,a.memo)((function(){var n=(0,a.useRef)(null),e=(0,a.useRef)(null),t=(0,a.useState)(window.devicePixelRatio),d=(0,i.Z)(t,2),v=d[0],m=d[1],g=(0,a.useRef)(null),p=(0,a.useState)({}),x=(0,i.Z)(p,2),w=x[0],y=x[1],M=function(n,e){var t=n.getContext("2d"),r=n.offsetWidth,i=n.offsetHeight;n.width=r*e,n.height=i*e,y({width:n.width,height:n.height}),t.scale(e,e)};g.current=v,(0,a.useEffect)((function(){var t=g.current,r=n.current,i=r.offsetLeft,a=r.offsetTop;M(r,t),h.offsetLeft=i,h.offsetTop=a,l(r,h);var o=e.current,u=function(n){n.preventDefault()};return o.addEventListener("wheel",u,{passive:!1}),function(){o.removeEventListener("wheel",u)}}),[g]);var Z=function(e){return function(e){var t=(0,o.dE)(e,h);h.draggingElement.points.push([t.x,t.y]),l(n.current,h)}},E=function(n){return function(){window.removeEventListener("pointermove",n.eventListeners.onMove),window.removeEventListener("pointerup",n.eventListeners.onUp)}};return(0,s.jsxs)("div",{className:"free-draw",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["canvas\u5bbd\u5ea6\uff1a",w.width," \u9ad8\u5ea6\uff1a",w.height," \u9762\u79ef\uff1a",w.width*w.height]}),(0,s.jsxs)("div",{children:["\u5f53\u524d\u7cfb\u6570\uff1a",(0,s.jsx)("input",{type:"number",value:v,onChange:function(e){var t=Number(e.target.value);f.length=0,m(t),M(n.current,t)}})]})]}),(0,s.jsx)("div",{className:"container",ref:e,children:(0,s.jsx)("canvas",{ref:n,className:"canvas",onPointerDown:function(n){var e=(0,o.dE)(n,h),t={origin:e,lastCoords:(0,r.Z)({},e),eventListeners:{onMove:null,onUp:null}},i={x:t.origin.x,y:t.origin.y,points:[[t.origin.x,t.origin.y]],strokeColor:"#000000",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"black"};h.draggingElement=i,f.push(i);var a=Z(t),u=E(t);window.addEventListener("pointermove",a),window.addEventListener("pointerup",u),t.eventListeners.onMove=a,t.eventListeners.onUp=u},children:"\u7ed8\u5236canvas"})}),(0,s.jsx)(u.Z,{src:c})]})}))},45204:function(n,e,t){t.d(e,{$9:function(){return l},B8:function(){return c},KP:function(){return d},Pi:function(){return h},TE:function(){return m},dE:function(){return u},kb:function(){return p},mO:function(){return x},qf:function(){return v}});var r=t(29439),i=t(37762),a=t(93433),o=t(84453),u=function(n,e){var t=n.clientX,r=n.clientY,i=e.zoom,a=e.offsetLeft,o=e.offsetTop,u=e.scrollX,c=e.scrollY,l=i?i.value:1;return{x:(t-a)/l-u,y:(r-o)/l-c}},c=function(){var n=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random());return"rgb(".concat(n,",").concat(e,",").concat(t,")")},l=function(n){return function(n,e){var t=null,r=null,i=null,o=function e(o){t=window.requestAnimationFrame((function(){t=null,n.apply(void 0,(0,a.Z)(o)),r=null,i&&(r=i,i=null,e(r))}))},u=function(){for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];r=a,null===t?o(r):null!==e&&void 0!==e&&e.trailing&&(i=a)};return u.flush=function(){null!==t&&(cancelAnimationFrame(t),t=null),r&&(n.apply(void 0,(0,a.Z)(i||r)),r=i=null)},u.cancel=function(){r=i=null,null!==t&&(cancelAnimationFrame(t),t=null)},u}((function(e){(0,o.unstable_batchedUpdates)(n,e)}))},s=function(n){var e=1/0,t=1/0,a=-1/0,o=-1/0,u=n.points;"freedraw"===n.type&&(u=n.points.map((function(e){return[e[0]-n.x,e[1]-n.y]})));var c,l=(0,i.Z)(u);try{for(l.s();!(c=l.n()).done;){var s=(0,r.Z)(c.value,2),f=s[0],h=s[1];e=Math.min(e,f),t=Math.min(t,h),a=Math.max(a,f),o=Math.max(o,h)}}catch(d){l.e(d)}finally{l.f()}return[e,t,a,o]},f=function(n,e,t,r,i){return[(n-t)*Math.cos(i)-(e-r)*Math.sin(i)+t,(n-t)*Math.sin(i)+(e-r)*Math.cos(i)+r]},h=function(n){var e=v(n),t=(0,r.Z)(e,6),i=t[0],a=t[1],o=t[2],u=t[3],c=t[4],l=t[5];if("freedraw"===n.type){var h=s(n),d=(0,r.Z)(h,4),m=d[0],g=d[1],p=d[2],x=d[3];return[m+n.x,g+n.y,p+n.x,x+n.y]}var w=f(i,a,c,l,n.angle),y=(0,r.Z)(w,2),M=y[0],Z=y[1],E=f(i,u,c,l,n.angle),k=(0,r.Z)(E,2),L=k[0],b=k[1],j=f(o,u,c,l,n.angle),S=(0,r.Z)(j,2),C=S[0],N=S[1],P=f(o,a,c,l,n.angle),T=(0,r.Z)(P,2),R=T[0],U=T[1];return[Math.min(M,L,C,R),Math.min(Z,b,N,U),Math.max(M,L,C,R),Math.max(Z,b,N,U)]},d=function(n){if(!n.length)return[0,0,0,0];var e=1/0,t=-1/0,i=1/0,a=-1/0;return n.forEach((function(n){var o=h(n),u=(0,r.Z)(o,4),c=u[0],l=u[1],s=u[2],f=u[3];e=Math.min(e,c),i=Math.min(i,l),t=Math.max(t,s),a=Math.max(a,f)})),[e,i,t,a]},v=function(n){if("freedraw"===n.type){var e=s(n),t=(0,r.Z)(e,4),i=t[0],a=t[1],o=t[2],u=t[3],c=i+n.x,l=a+n.y,f=o+n.x,h=u+n.y;return[c,l,f,h,(c+f)/2,(l+h)/2]}return[n.x,n.y,n.x+n.width,n.y+n.height,n.x+n.width/2,n.y+n.height/2]},m=function(n,e){return Math.abs(n-e)},g=0,p=function(){return"id".concat(g++)},x=function(n){var e=n.fontSize,t=n.fontFamily;return"".concat(e,"px ").concat(t,", Segoe UI Emoji")}}}]);
//# sourceMappingURL=FreeDraw.7597d03b.chunk.js.map