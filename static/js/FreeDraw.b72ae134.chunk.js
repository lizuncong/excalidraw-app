"use strict";(self.webpackChunkexcalidraw_app=self.webpackChunkexcalidraw_app||[]).push([[826],{1890:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(1413),o=t(4925),i=t(9439),a=t(2791),l=t(1350),s=t(1926),u=t(4209),c=t(6571),f=(t(3659),t(184)),d=["node","inline","className","children"];var h=function(e){var n=e.src,t=(0,a.useState)(""),h=(0,i.Z)(t,2),p=h[0],v=h[1];return(0,a.useEffect)((function(){fetch(n).then((function(e){return e.text()})).then((function(e){v(e)}))}),[n]),(0,f.jsx)("div",{className:"markdown-body",children:(0,f.jsx)(l.D,{children:p,rehypePlugins:[c.Z],remarkPlugins:[s.Z],components:{code:function(e){e.node;var n=e.inline,t=e.className,i=e.children,a=(0,o.Z)(e,d),l=/language-(\w+)/.exec(t||"");return!n&&l?(0,f.jsx)(u.Z,(0,r.Z)({children:String(i).replace(/\n$/,""),language:l[1],className:"my-code",PreTag:"div"},a)):(0,f.jsx)("code",(0,r.Z)((0,r.Z)({className:t},a),{},{children:i}))}}})})}},7043:function(e,n,t){t.r(n),t.d(n,{default:function(){return h},elements:function(){return f}});var r=t(1413),o=t(2791),i=t(84),a=t(1890),l=t.p+"static/media/\u81ea\u7531\u7ed8\u5236.31d6cfe0d16ae931b73c.md",s=t(3433),u=function(e,n){var t,r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),t=r,f.forEach((function(e){t.save(),t.beginPath(),t.lineWidth=3,t.strokeStyle=e.strokeStyle,e.points.forEach((function(n,r){r?t.lineTo.apply(t,(0,s.Z)(n)):t.moveTo.apply(t,(0,s.Z)(e.points[0]))})),t.stroke(),t.restore()})),localStorage.setItem("free-draw-elements",JSON.stringify(f))},c=t(184),f=JSON.parse(localStorage.getItem("free-draw-elements"))||[],d={offsetLeft:0,offsetTop:0,scrollX:0,scrollY:0,draggingElement:null},h=(0,o.memo)((function(){var e=(0,o.useRef)(null),n=(0,o.useRef)(null);(0,o.useEffect)((function(){var t=e.current,r=t.getContext("2d"),o=t.offsetWidth,i=t.offsetHeight,a=t.offsetLeft,l=t.offsetTop;t.width=o*window.devicePixelRatio,t.height=i*window.devicePixelRatio,r.scale(window.devicePixelRatio,window.devicePixelRatio),d.offsetLeft=a,d.offsetTop=l,u(t,d);var s=n.current,c=function(e){e.preventDefault()};return s.addEventListener("wheel",c,{passive:!1}),function(){s.removeEventListener("wheel",c)}}),[]);var t=function(n){return function(n){var t=(0,i.dE)(n,d);d.draggingElement.points.push([t.x,t.y]),u(e.current,d)}},s=function(e){return function(){console.log("appState...",d),console.log("elements...",f.map((function(e){return e.points.length}))),window.removeEventListener("pointermove",e.eventListeners.onMove),window.removeEventListener("pointerup",e.eventListeners.onUp)}};return(0,c.jsxs)("div",{className:"free-draw",children:[(0,c.jsx)("div",{className:"container",ref:n,children:(0,c.jsx)("canvas",{ref:e,className:"canvas",onPointerDown:function(e){var n=(0,i.dE)(e,d),o={origin:n,lastCoords:(0,r.Z)({},n),eventListeners:{onMove:null,onUp:null}},a={x:o.origin.x,y:o.origin.y,points:[[o.origin.x,o.origin.y]],strokeColor:"#000000",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:(0,i.B8)()};d.draggingElement=a,f.push(a);var l=t(o),u=s(o);window.addEventListener("pointermove",l),window.addEventListener("pointerup",u),o.eventListeners.onMove=l,o.eventListeners.onUp=u},children:"\u7ed8\u5236canvas"})}),(0,c.jsx)(a.Z,{src:l})]})}))},84:function(e,n,t){t.d(n,{$9:function(){return u},B8:function(){return s},TE:function(){return f},dE:function(){return l},qf:function(){return c}});var r=t(9439),o=t(7762),i=t(3433),a=t(4164),l=function(e,n){var t=e.clientX,r=e.clientY,o=n.offsetLeft,i=n.offsetTop;return{x:t-o-n.scrollX,y:r-i-n.scrollY}},s=function(){var e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),t=Math.floor(256*Math.random());return"rgb(".concat(e,",").concat(n,",").concat(t,")")},u=function(e){return function(e,n){var t=null,r=null,o=null,a=function n(a){t=window.requestAnimationFrame((function(){t=null,e.apply(void 0,(0,i.Z)(a)),r=null,o&&(r=o,o=null,n(r))}))},l=function(){for(var e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];r=i,null===t?a(r):null!==n&&void 0!==n&&n.trailing&&(o=i)};return l.flush=function(){null!==t&&(cancelAnimationFrame(t),t=null),r&&(e.apply(void 0,(0,i.Z)(o||r)),r=o=null)},l.cancel=function(){r=o=null,null!==t&&(cancelAnimationFrame(t),t=null)},l}((function(n){(0,a.unstable_batchedUpdates)(e,n)}))},c=function(e){if("freedraw"===e.type){var n=function(e){var n,t=1/0,i=1/0,a=-1/0,l=-1/0,s=(0,o.Z)(e);try{for(s.s();!(n=s.n()).done;){var u=(0,r.Z)(n.value,2),c=u[0],f=u[1];t=Math.min(t,c),i=Math.min(i,f),a=Math.max(a,c),l=Math.max(l,f)}}catch(d){s.e(d)}finally{s.f()}return[t,i,a,l]}(e.points),t=(0,r.Z)(n,4),i=t[0],a=t[1],l=t[2],s=t[3],u=i+e.x,c=a+e.y,f=l+e.x,d=s+e.y;return[u,c,f,d,(u+f)/2,(c+d)/2]}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},f=function(e,n){return Math.abs(e-n)},d=0;window.__generateExcalidrawElements=function(){return(JSON.parse(localStorage.getItem("free-draw-elements"))||[]).map((function(e){var n=e.points.map((function(n){return[n[0]-e.x,n[1]-e.y]})),t=function(e){var n=e.map((function(e){return e[0]})),t=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,(0,i.Z)(n))-Math.min.apply(Math,(0,i.Z)(n)),height:Math.max.apply(Math,(0,i.Z)(t))-Math.min.apply(Math,(0,i.Z)(t))}}(n),r=t.width,o=t.height;return{id:"id".concat(d++),type:"freedraw",x:e.x,y:e.y,width:r,height:o,angle:0,strokeColor:e.strokeStyle,backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],roundness:null,seed:Math.floor(Math.random()*Math.pow(2,31)),version:1,versionNonce:0,isDeleted:!1,boundElements:null,updated:Date.now(),link:null,locked:!1,points:n,pressures:[],simulatePressure:!0,lastCommittedPoint:n[n.length-1]}}))}}}]);
//# sourceMappingURL=FreeDraw.b72ae134.chunk.js.map